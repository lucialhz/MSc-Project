\documentclass[
11pt, % The default document font size, options: 10pt, 11pt, 12pt
twoside, %oneside, % Two side (alternating margins) for binding by default, uncomment to switch to one side
english, % ngerman for German
onehalfspacing, % Single line spacing, alternatives: onehalfspacing or doublespacing
%draft, % Uncomment to enable draft mode (no pictures, no links, overfull hboxes indicated)
nolistspacing, % If the document is onehalfspacing or doublespacing, uncomment this to set spacing in lists to single
liststotoc, % Uncomment to add the list of figures/tables/etc to the table of contents
%toctotoc, % Uncomment to add the main table of contents to the table of contents
parskip, % Uncomment to add space between paragraphs
%nohyperref, % Uncomment to not load the hyperref package
headsepline, % Uncomment to get a line under the header
%chapterinoneline, % Uncomment to place the chapter title next to the number on one line
%consistentlayout, % Uncomment to change the layout of the declaration, abstract and acknowledgements pages to match the default layout
]{MastersDoctoralThesis} % The class file specifying the document structure
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{mathpazo}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{array}
\usepackage{booktabs}
\usepackage{fullpage}
\usepackage{graphicx}
\usepackage{threeparttable}
\usepackage{wasysym}
\usepackage[ddmmyyyy]{datetime}
\usepackage{listings}
\usepackage{acronym}
\usepackage{enumerate}
\graphicspath{{images/}}
\usepackage{xcolor}
\newcommand\furtherwork[1]{\textcolor{red}{#1}}

\usepackage{hyperref}
\usepackage[autostyle=true]{csquotes}

\DeclareUnicodeCharacter{2217}{*}
\usepackage[british]{babel}
\usepackage[
backend=biber,
style=ieee,
sorting=none,
urldate=long,
doi=false,
isbn=false
]{biblatex}
 
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}
 
\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}
 
\lstset{style=mystyle} 
 
\addbibresource{bibs/project.bib}
\DeclareSourcemap{ % Used when .bib/Bibliography is compiled, not when document is
    \maps{
        \map{ % Replaces '{\_}', '{_}' or '\_' with just '_'
            \step[fieldsource=url,
                  match=\regexp{\{\\\_\}|\{\_\}|\\\_},
                  replace=\regexp{\_}]
        }
        \map{ % Replaces '{'$\sim$'}', '$\sim$' or '{~}' with just '~'
            \step[fieldsource=url,
                  match=\regexp{\{\$\\sim\$\}|\{\~\}|\$\\sim\$},
                  replace=\regexp{\~}]
        }
        \map{ % Replaces '{\$}'
            \step[fieldsource=url,
                  match=\regexp{\{\\\x{26}\}},
                  replace=\regexp{\x{26}}]
        }
    }
}

\geometry{
	paper=a4paper, % Change to letterpaper for US letter
	inner=2.0cm, % Inner margin
	outer=2.0cm, % Outer margin
	bindingoffset=.5cm, % Binding offset
	top=1.5cm, % Top margin
	bottom=1.5cm, % Bottom margin
	%showframe % Uncomment to show how the type block is set on the page
}

\thesistitle{Towards Auditing of Control Flow Integrity}
\author{Luke \textsc{Atherton}}

\AtBeginDocument{
\hypersetup{pdftitle=\ttitle} % Set the PDF's title to your title
\hypersetup{pdfauthor=\authorname} % Set the PDF's author to your name
}

\newif\iflitreview
%\litreviewtrue 
\litreviewfalse

\newif\ifnotesincluded
\notesincludedtrue 
%\notesincludedfalse 

\begin{document}

\frontmatter
\pagestyle{plain}

\input{chapters/title_page}

\iflitreview

\else

\fi
\ifnotesincluded

\chapter*{Acknowledgements}
Thanks everyone! Elisabeth

\fi

\tableofcontents
\lstlistoflistings
\listoffigures
\listoftables

\input{acro_list}

\chapter*{Executive Summary}
\addchaptertocentry{Executive Summary}
\input{chapters/abstract}

\iflitreview

\chapter{Literature Review}
\input{chapters/literature_review}

\appendix
\chapter{Appendix Title}
\input{chapters/appendix}
\else

\mainmatter
\pagestyle{thesis}

\chapter{Introduction}
\input{chapters/1/chapter1introduction}
\input{chapters/1/introduction}
\input{chapters/1/attacks}
\input{chapters/1/problem_description}
\input{chapters/1/properties_requirements}
\input{chapters/1/project_structure}\\
\input{chapters/1/chapter1summary}

\chapter{Embedded Systems and Control Flow Integrity} \label{chapterCFI}
\input{chapters/2/chapter2introduction}
\input{chapters/2/high_level}
\input{chapters/2/cfi}
\input{chapters/2/chapter2summary}

\chapter{Background Literature Review} \label{chapterBackground}
\input{chapters/3/literature_review}

\chapter{Comparison of Solutions} \label{chapterComparison}
\input{chapters/4/chapter4introduction}
\input{chapters/4/comparison-of-solutions}
\input{chapters/4/comparison-of-solutions-table}
\input{chapters/4/static_attestation}
\input{chapters/4/static_attestation_table}
\input{chapters/4/chapter4summary}


\chapter{Proposed Solution} \label{chapterTheoreticalSolution}
\input{chapters/5/building-cfg}
\input{chapters/5/control-flow-tracing}
\input{chapters/5/what-is-stored}
\input{chapters/5/provisioning}
\input{chapters/5/arm_trustzone}

\chapter{Security Analysis} \label{chapterSecurityAnalysis}
\input{chapters/7/security_analysis}

\fi

\ifnotesincluded
\chapter{Conclusion} \label{chapterConclusion}
\input{chapters/8/conclusion}
\fi

\begin{sloppypar}
\printbibliography
\end{sloppypar}
\end{document}